---
layout: post
title: Wrapping openbabel in python - accessing C++ via boost with setup.py
date: '2013-05-12T20:13:00.001-07:00'
author: jandom
tags: 
modified_time: '2013-06-02T20:15:34.767-07:00'
blogger_id: tag:blogger.com,1999:blog-2967594273163880803.post-3305469451616389550
blogger_orig_url: https://jandomanski.blogspot.com/2013/05/wrapping-openbabel-in-python-accessing.html
---

<link href='http://alexgorbatchev.com/pub/sh/current/styles/shCore.css' rel='stylesheet' type='text/css'/><link href='http://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css' rel='stylesheet' type='text/css'/><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shCore.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCpp.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCSharp.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushCss.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJava.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPhp.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPython.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushRuby.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushSql.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushVb.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushXml.js' type='text/javascript'></script><script src='http://alexgorbatchev.com/pub/sh/current/scripts/shBrushPerl.js' type='text/javascript'></script><script language='javascript'>SyntaxHighlighter.config.bloggerMode = true; SyntaxHighlighter.config.clipboardSwf = 'http://alexgorbatchev.com/pub/sh/current/scripts/clipboard.swf'; SyntaxHighlighter.all(); </script> <b>Update</b> I have de-contrived the example below.   After some struggle, I've managed to accomplish this seemingly simple task: wrap a friendly open-source library inside python and make it a python module. Such wrapping is handy, because it retains the speed of c++ inside of python.<br /> If you want to check out how to do more or less the same thing with cython instead of boost see <a href="http://jandomanski.blogspot.com/2013/05/openbable-wrapping-in-boost-and-cython.html">this</a>. <br />So here is the setup.py  <pre class="brush: csharp">// Comment<br />#! /usr/bin/python<br /><br />from ez_setup import use_setuptools<br />use_setuptools()<br />from setuptools import setup, Extension<br /><br />import sys, os<br />import glob<br /><br />include_dirs = []<br /><br />if __name__ == '__main__':<br /><br />    extensions = [Extension('_boostbabel',['src/boostbabel.cpp'],<br />                            include_dirs+['src/boostbabel/', '/usr/include/openbabel-2.0/'],<br />                            language="c++", libraries=['boost_python', 'openbabel']),<br />                  ]<br />    setup(name              = 'boostbabel',<br />          ext_package       = 'boostbabel',<br />          ext_modules       = extensions,<br />          zip_safe = False,     # as a zipped egg the *.so files are not found (at least in Ubuntu/Linux)<br />          )<br /><br /></pre> Relative to setup.py we have the actual source: src/boostbabel.cpp  <script type="syntaxhighlighter" class="brush: csharp"><![CDATA[ #include <Python.h>#include <boost/python.hpp> #include <openbabel/mol.h>#include <openbabel/atom.h>#include <openbabel/bond.h> using namespace boost::python;  using namespace OpenBabel;  BOOST_PYTHON_MODULE(boostbabel) { // boostbabel has to match filename, here boostbabel.cpp   //class_<OpenBabel::OBBond>("OBBond");   class_<OpenBabel::OBAtom>("OBAtom");   class_<OpenBabel::OBMol>("OBMol");  } ]]></script><strike>Now I know nothing about building/linking/including, so getting to that stage was pretty hard. Being the lazy one, I wonder if there isn't a way to guess all of the includes and libs used to init the Extension object by being clever in parsing the actual boostbabel.cpp?</strike> Nooope, there isn't for the general case. 